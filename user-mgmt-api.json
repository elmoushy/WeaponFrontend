{
  "base_url": "VITE_API_BASE_URL",
  "authentication": {
    "type": "Bearer Token",
    "header": "Authorization: Bearer <token>",
    "description": "Azure AD JWT token required for all authenticated endpoints"
  },
  "authorization": {
    "roles": ["super_admin", "admin", "user"],
    "notes": "super_admin has global scope; admin is group-scoped; user has personal scope only"
  },
  "endpoints": [
    {
      "method": "GET",
      "endpoint": "/auth/me/",
      "description": "Get current authenticated user information",
      "authentication": true,
      "authorization": ["super_admin", "admin", "user"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "user": {
            "id": 1,
            "azure_object_id": "abc123-def456-ghi789",
            "email": "user@example.com",
            "first_name": "John",
            "last_name": "Doe",
            "full_name": "John Doe",
            "initials": "JD",
            "role": "admin",
            "role_display": "Administrator",
            "is_active": true,
            "is_staff": true,
            "date_joined": "2025-01-01T10:00:00Z",
            "last_login": "2025-01-15T14:30:00Z"
          },
          "message": "User information retrieved successfully"
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        },
        "500": {
          "detail": "Error retrieving user information"
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/users/",
      "description": "List all users in the system (super_admin only)",
      "authentication": true,
      "authorization": ["super_admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "users": [
            {
              "id": 1,
              "username": "abc123-def456",
              "email": "user@example.com",
              "first_name": "John",
              "last_name": "Doe",
              "full_name": "John Doe",
              "role": "admin",
              "is_active": true,
              "date_joined": "2025-01-01T10:00:00Z",
              "last_login": "2025-01-15T14:30:00Z"
            }
          ],
          "count": 25
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/groups/",
      "description": "List groups based on user role (super_admin sees all, admin sees their groups)",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "groups": [
            {
              "id": 1,
              "name": "Development Team",
              "description": "Software development team",
              "admin_count": 2,
              "user_count": 5,
              "admins": [
                {
                  "id": 1,
                  "username": "abc123",
                  "email": "admin@example.com",
                  "first_name": "Jane",
                  "last_name": "Smith",
                  "full_name": "Jane Smith",
                  "role": "admin",
                  "is_active": true,
                  "date_joined": "2025-01-01T10:00:00Z"
                }
              ],
              "members": [
                {
                  "id": 1,
                  "username": "abc123",
                  "email": "admin@example.com",
                  "first_name": "Jane",
                  "last_name": "Smith",
                  "full_name": "Jane Smith",
                  "role": "admin",
                  "is_active": true,
                  "date_joined": "2025-01-01T10:00:00Z"
                }
              ],
              "created_at": "2025-01-01T10:00:00Z",
              "updated_at": "2025-01-15T14:30:00Z"
            }
          ],
          "count": 3
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "POST",
      "endpoint": "/auth/groups/",
      "description": "Create a new group with admin assignments (super_admin only)",
      "authentication": true,
      "authorization": ["super_admin"],
      "query_parameters": {},
      "request_body": {
        "name": "New Development Team",
        "description": "Description of the new team",
        "admin_user_ids": [1, 2]
      },
      "response_formats": {
        "201": {
          "group": {
            "id": 2,
            "name": "New Development Team",
            "description": "Description of the new team",
            "admin_count": 2,
            "user_count": 2,
            "user_groups": [
              {
                "id": 1,
                "user": {
                  "id": 1,
                  "username": "abc123",
                  "email": "user1@example.com",
                  "first_name": "John",
                  "last_name": "Doe",
                  "full_name": "John Doe",
                  "role": "admin",
                  "is_active": true,
                  "date_joined": "2025-01-01T10:00:00Z"
                },
                "group_name": "New Development Team",
                "is_group_admin": true,
                "joined_at": "2025-01-15T14:30:00Z"
              }
            ],
            "created_at": "2025-01-15T14:30:00Z",
            "updated_at": "2025-01-15T14:30:00Z"
          },
          "message": "Group created successfully"
        },
        "400": {
          "admin_user_ids": [
            "At least one admin must be assigned."
          ]
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        },
        "500": {
          "detail": "Error creating group"
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/groups/{group_id}/",
      "description": "Get detailed information about a specific group",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "id": 1,
          "name": "Development Team",
          "description": "Software development team",
          "admin_count": 2,
          "user_count": 5,
          "user_groups": [
            {
              "id": 1,
              "user": {
                "id": 1,
                "username": "abc123",
                "email": "user1@example.com",
                "first_name": "John",
                "last_name": "Doe",
                "full_name": "John Doe",
                "role": "admin",
                "is_active": true,
                "date_joined": "2025-01-01T10:00:00Z"
              },
              "group_name": "Development Team",
              "is_group_admin": true,
              "joined_at": "2025-01-01T12:00:00Z"
            }
          ],
          "created_at": "2025-01-01T10:00:00Z",
          "updated_at": "2025-01-15T14:30:00Z"
        },
        "404": {
          "detail": "Group not found or access denied."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "PUT",
      "endpoint": "/auth/groups/{group_id}/",
      "description": "Update group information (super_admin only)",
      "authentication": true,
      "authorization": ["super_admin"],
      "query_parameters": {},
      "request_body": {
        "name": "Updated Team Name",
        "description": "Updated description"
      },
      "response_formats": {
        "200": {
          "id": 1,
          "name": "Updated Team Name",
          "description": "Updated description",
          "admin_count": 2,
          "user_count": 5,
          "admins": [],
          "members": [],
          "created_at": "2025-01-01T10:00:00Z",
          "updated_at": "2025-01-15T14:30:00Z"
        },
        "400": {
          "name": [
            "This field may not be blank."
          ]
        },
        "404": {
          "detail": "Group not found."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "DELETE",
      "endpoint": "/auth/groups/{group_id}/",
      "description": "Delete a group (super_admin only)",
      "authentication": true,
      "authorization": ["super_admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "message": "Group \"Development Team\" deleted successfully"
        },
        "404": {
          "detail": "Group not found."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "POST",
      "endpoint": "/auth/groups/{group_id}/users/",
      "description": "Add a user to a group",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "request_body": {
        "user_id": 3,
        "is_group_admin": false
      },
      "response_formats": {
        "201": {
          "group": {
            "id": 1,
            "name": "Development Team",
            "description": "Software development team",
            "admin_count": 2,
            "user_count": 6,
            "user_groups": [
              {
                "id": 1,
                "user": {
                  "id": 3,
                  "username": "xyz789",
                  "email": "newuser@example.com",
                  "first_name": "Alice",
                  "last_name": "Johnson",
                  "full_name": "Alice Johnson",
                  "role": "admin",
                  "is_active": true,
                  "date_joined": "2025-01-10T10:00:00Z"
                },
                "group_name": "Development Team",
                "is_group_admin": false,
                "joined_at": "2025-01-15T14:30:00Z"
              }
            ],
            "created_at": "2025-01-01T10:00:00Z",
            "updated_at": "2025-01-15T14:30:00Z"
          },
          "message": "User newuser@example.com added to group successfully"
        },
        "400": {
          "detail": "User is already in this group."
        },
        "404": {
          "detail": "Group not found or access denied."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        },
        "500": {
          "detail": "Error adding user to group"
        }
      }
    },
    {
      "method": "PUT",
      "endpoint": "/auth/groups/{group_id}/users/{user_id}/",
      "description": "Update user's group membership (toggle admin status)",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "request_body": {
        "is_group_admin": true
      },
      "response_formats": {
        "200": {
          "group": {
            "id": 1,
            "name": "Development Team",
            "description": "Software development team",
            "admin_count": 3,
            "user_count": 6,
            "user_groups": [],
            "created_at": "2025-01-01T10:00:00Z",
            "updated_at": "2025-01-15T14:30:00Z"
          },
          "message": "User group membership updated successfully"
        },
        "400": {
          "non_field_errors": [
            "Cannot remove the last admin from a group."
          ]
        },
        "404": {
          "detail": "User group membership not found or access denied."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "DELETE",
      "endpoint": "/auth/groups/{group_id}/users/{user_id}/",
      "description": "Remove a user from a group",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "message": "User user@example.com removed from group \"Development Team\" successfully"
        },
        "400": {
          "detail": "Cannot remove the last admin from a group."
        },
        "404": {
          "detail": "User group membership not found or access denied."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/roles/",
      "description": "Get list of available user roles for dropdowns",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "roles": [
            {
              "value": "user",
              "display": "User"
            },
            {
              "value": "admin", 
              "display": "Administrator"
            },
            {
              "value": "super_admin",
              "display": "Super Administrator"
            }
          ]
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/groups/dropdown/",
      "description": "Get lightweight list of groups for dropdown selections",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "groups": [
            {
              "id": 1,
              "name": "Development Team"
            },
            {
              "id": 2,
              "name": "Marketing Team"
            }
          ]
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/users/search/",
      "description": "Search users by name or email for user selection",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {
        "q": "string - search query for name or email",
        "limit": "integer - maximum results to return (default: 20)"
      },
      "response_formats": {
        "200": {
          "users": [
            {
              "id": 1,
              "email": "user@example.com",
              "full_name": "John Doe",
              "role": "admin",
              "is_active": true
            }
          ],
          "count": 1
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "PUT",
      "endpoint": "/auth/users/{user_id}/role/",
      "description": "Update user role (super_admin only)",
      "authentication": true,
      "authorization": ["super_admin"],
      "query_parameters": {},
      "request_body": {
        "role": "admin"
      },
      "response_formats": {
        "200": {
          "user": {
            "id": 1,
            "email": "user@example.com",
            "role": "admin",
            "role_display": "Administrator",
            "is_active": true
          },
          "message": "User role updated successfully"
        },
        "400": {
          "role": [
            "Invalid role selection."
          ]
        },
        "404": {
          "detail": "User not found."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "POST",
      "endpoint": "/auth/groups/bulk-add-users/",
      "description": "Add multiple users to a group at once",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "request_body": {
        "group_id": 1,
        "user_ids": [3, 4, 5],
        "is_group_admin": false
      },
      "response_formats": {
        "201": {
          "group": {
            "id": 1,
            "name": "Development Team",
            "user_count": 8,
            "admin_count": 2
          },
          "added_users": [
            {
              "id": 3,
              "email": "user3@example.com",
              "full_name": "Alice Smith"
            }
          ],
          "message": "3 users added to group successfully"
        },
        "400": {
          "user_ids": [
            "Some users are already in this group."
          ]
        },
        "404": {
          "detail": "Group not found or access denied."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/users/{user_id}/groups/",
      "description": "Get all groups a specific user belongs to",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "user": {
            "id": 1,
            "email": "user@example.com",
            "full_name": "John Doe",
            "role": "admin"
          },
          "groups": [
            {
              "id": 1,
              "name": "Development Team",
              "is_group_admin": true,
              "joined_at": "2025-01-01T10:00:00Z"
            },
            {
              "id": 2,
              "name": "Project Team",
              "is_group_admin": false,
              "joined_at": "2025-01-05T14:00:00Z"
            }
          ],
          "group_count": 2
        },
        "404": {
          "detail": "User not found."
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "GET",
      "endpoint": "/auth/stats/dashboard/",
      "description": "Get dashboard statistics for user management overview",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "response_formats": {
        "200": {
          "total_users": 45,
          "total_groups": 8,
          "active_users": 42,
          "super_admins": 2,
          "admins": 15,
          "regular_users": 28,
          "recent_activity": [
            {
              "type": "user_added_to_group",
              "user": "user@example.com",
              "group": "Development Team",
              "timestamp": "2025-01-15T14:30:00Z"
            }
          ]
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    },
    {
      "method": "POST",
      "endpoint": "/auth/users/invite/",
      "description": "Invite new users to the system",
      "authentication": true,
      "authorization": ["super_admin", "admin"],
      "query_parameters": {},
      "request_body": {
        "email": "newuser@example.com",
        "first_name": "New",
        "last_name": "User",
        "groups": [1, 2],
        "role": "admin"
      },
      "status": "pending",
      "implementation_notes": "Need to create user invitation system that integrates with Azure AD user provisioning",
      "response_formats": {
        "201": {
          "user": {
            "id": 46,
            "email": "newuser@example.com",
            "full_name": "New User",
            "role": "admin",
            "is_active": false
          },
          "message": "User invitation sent successfully"
        },
        "400": {
          "email": [
            "User with this email already exists."
          ]
        },
        "403": {
          "detail": "You do not have permission to perform this action."
        },
        "401": {
          "detail": "Authentication credentials were not provided."
        }
      }
    }
  ]
}
